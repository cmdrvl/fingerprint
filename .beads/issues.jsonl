{"id":"bd-14l","title":"PRM-FP-0012: Extend fixtures with refusal/witness edge cases","description":"Extend fixtures with deeper refusal and witness edge cases after core corpus is in place.\n\n## Acceptance Criteria\n- Add fixtures for unsupported formats, version-mismatch input, duplicate/invalid manifest lines, and witness-ledger query edge cases; include per-fixture intent notes in tests/fixtures/README.md; integration/smoke/golden beads can reference these fixtures without creating ad-hoc temp data.\n\n## Notes\nNon-goal: implement runtime logic changes; this bead is fixtures/documentation only.","acceptance_criteria":"Add fixtures for unsupported formats, version-mismatch input, duplicate/invalid manifest lines, and witness-ledger query edge cases; include per-fixture intent notes in tests/fixtures/README.md; integration/smoke/golden beads can reference these fixtures without creating ad-hoc temp data.","notes":"Non-goal: implement runtime logic changes; this bead is fixtures/documentation only.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T04:04:27.585284Z","created_by":"zac","updated_at":"2026-02-25T04:05:41.284228Z","compaction_level":0,"original_size":0,"labels":["fixtures","tests","witness"],"dependencies":[{"issue_id":"bd-14l","depends_on_id":"bd-9in","type":"blocks","created_at":"2026-02-25T04:04:31.913482Z","created_by":"zac"}]}
{"id":"bd-18y","title":"PRM-FP-0007: Add integration tests for pipeline run mode","description":"Add integration tests for core run-mode pipeline behavior from hashed JSONL input to fingerprint JSONL output (using core fixtures).\n\n## Acceptance Criteria\n- Cover all-matched path (exit 0), partial no-match or skipped path (exit 1), and refusal path (exit 2); verify passthrough of upstream _skipped records and creation of new _skipped for parse failures; assert output ordering is preserved under >1 worker setting; assert refusal envelope shape for E_BAD_INPUT/E_UNKNOWN_FP using core fixture corpus.\n\n## Notes\nBoundary: run mode core behavior only; deeper refusal/witness edge-case fixture expansion remains in PRM-FP-0012.","acceptance_criteria":"Cover all-matched path (exit 0), partial no-match or skipped path (exit 1), and refusal path (exit 2); verify passthrough of upstream _skipped records and creation of new _skipped for parse failures; assert output ordering is preserved under >1 worker setting; assert refusal envelope shape for E_BAD_INPUT/E_UNKNOWN_FP using core fixture corpus.","notes":"Boundary: run mode core behavior only; deeper refusal/witness edge-case fixture expansion remains in PRM-FP-0012.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T03:58:31.041415Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.612241Z","compaction_level":0,"original_size":0,"labels":["integration","pipeline","tests"],"dependencies":[{"issue_id":"bd-18y","depends_on_id":"bd-9in","type":"blocks","created_at":"2026-02-25T04:02:09.730892Z","created_by":"zac"},{"issue_id":"bd-18y","depends_on_id":"bd-hwe","type":"blocks","created_at":"2026-02-26T11:21:23.612200Z","created_by":"zac"}]}
{"id":"bd-1bm","title":"PRM-FP-0100: Scaffold skeleton (all files as compilable stubs)","description":"Create the complete compilable crate skeleton with ALL files as minimal stubs. Every module file exists with type definitions and todo!() method bodies so that cargo build passes and all 20+ downstream beads can work on individual files in parallel without touching mod.rs or lib.rs.\n\nFILES: Cargo.toml, main.rs, lib.rs (all pub mod + run() stub), operator.json, ALL mod.rs files, ALL leaf .rs files with pub struct/enum/fn stubs per PLAN.md.\n\nSTUB CONTRACT: Each stub file has correct pub signatures with todo!() or default return bodies. Downstream beads fill in real implementations without modifying mod.rs or lib.rs.\n\nVERIFY: cargo build && cargo clippy --all-targets -- -D warnings && fingerprint --version","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:18.020054Z","created_by":"zac","updated_at":"2026-02-26T11:32:00.623077Z","compaction_level":0,"original_size":0}
{"id":"bd-1f0","title":"PRM-FP-0106a: Registry core + installed","description":"Fill in registry/registry.rs (FingerprintRegistry: get(id), list(), validate for duplicates/trust) and registry/installed.rs (installed crate discovery, stub OK for v0.1). Defines Fingerprint trait if not in scaffold.\n\nFILES: src/registry/registry.rs, src/registry/installed.rs (2 files)\nVERIFY: cargo test --lib -- registry::registry","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:20:08.837681Z","created_by":"zac","updated_at":"2026-02-26T11:48:59.396384Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1f0","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:59.396335Z","created_by":"zac"}]}
{"id":"bd-1pi","title":"PRM-FP-0105a: Witness record","description":"Fill in witness/record.rs: WitnessRecord struct matching witness.v0 schema (id, tool, version, binary_hash, inputs, params, outcome, exit_code, output_hash, prev, ts). Record ID is BLAKE3 hash. Serialization to JSONL.\n\nFILE: src/witness/record.rs (1 file)\nVERIFY: cargo test --lib -- witness::record","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:59.292100Z","created_by":"zac","updated_at":"2026-02-26T11:33:14.374797Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1pi","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:20:57.418878Z","created_by":"zac"}]}
{"id":"bd-1rw","title":"PRM-FP-0006b: Unit tests — refusal module","description":"Unit tests for refusal code construction and payload envelope shape. Verify all RefusalCode variants produce valid envelopes per PLAN.md schema (version, outcome, refusal object with code/message/detail/next_command). FILE: tests/refusal.rs or src/refusal #[cfg(test)] (1 file). VERIFY: cargo test -- refusal","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:48:21.707048Z","created_by":"zac","updated_at":"2026-02-26T11:48:39.930785Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1rw","depends_on_id":"bd-1um","type":"blocks","created_at":"2026-02-26T11:48:39.874246Z","created_by":"zac"},{"issue_id":"bd-1rw","depends_on_id":"bd-9in","type":"blocks","created_at":"2026-02-26T11:48:39.930739Z","created_by":"zac"}]}
{"id":"bd-1um","title":"PRM-FP-0104a: Refusal module","description":"Fill in refusal/codes.rs (RefusalCode enum for run + compile modes) and refusal/payload.rs (RefusalPayload envelope construction per PLAN.md schema).\n\nFILES: src/refusal/codes.rs, src/refusal/payload.rs (2 files)\nVERIFY: cargo test --lib -- refusal","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:51.199089Z","created_by":"zac","updated_at":"2026-02-26T11:33:06.581295Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1um","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:20:57.368849Z","created_by":"zac"}]}
{"id":"bd-1zd","title":"PRM-FP-0006a: Unit tests — assertion engine","description":"Unit tests for all 7 v0.1 assertion types: sheet_exists, cell_eq, cell_regex, range_non_null, sheet_min_rows, filename_regex, sheet_name_regex. Verify short-circuit behavior. Uses core fixtures.\n\nFILE: tests/assertions.rs or src/dsl/assertions.rs #[cfg(test)] module (1 file)\nVERIFY: cargo test -- assertions","acceptance_criteria":"Add unit tests for sheet_exists/cell_eq/cell_regex/range_non_null/sheet_min_rows and filename/sheet-name regex assertions; verify short-circuit behavior records skipped assertions deterministically; add refusal-detail tests for input validation errors with stable code+detail shape; tests run under cargo test without network/external dependencies.","notes":"Boundary: unit-level behavior only, no end-to-end pipeline wiring in this bead.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T03:58:30.996618Z","created_by":"zac","updated_at":"2026-02-26T11:33:51.860593Z","compaction_level":0,"original_size":0,"labels":["tests","unit"],"dependencies":[{"issue_id":"bd-1zd","depends_on_id":"bd-3v7","type":"blocks","created_at":"2026-02-26T11:21:23.505659Z","created_by":"zac"},{"issue_id":"bd-1zd","depends_on_id":"bd-9in","type":"blocks","created_at":"2026-02-25T04:02:09.685652Z","created_by":"zac"}]}
{"id":"bd-22r","title":"PRM-FP-0108: Compile mode","description":"DSL-to-Rust crate generation: parse .fp.yaml, generate Cargo.toml + src/lib.rs implementing Fingerprint trait, embed compiler metadata.\n\n## Files touched\nsrc/compile/mod.rs, src/compile/codegen.rs, src/compile/crate_gen.rs\n\n## Acceptance Criteria\n- fingerprint compile test.fp.yaml --out dir/ generates valid Rust crate\n- Generated crate: Cargo.toml, src/lib.rs implementing Fingerprint trait, fixtures/ stubs\n- Embeds: compiler_version, source_hash (blake3 of canonicalized YAML), source: dsl\n- Deterministic: same YAML → same Rust source (byte-identical)\n- --check mode: validates YAML without generating code\n- Compile refusals: E_INVALID_YAML, E_UNKNOWN_ASSERTION, E_MISSING_FIELD\n- Exit codes: 0 (clean), 1 (warnings), 2 (refusal)\n- No witness records produced in compile mode\n- Unit tests for codegen determinism\n\n## Depends on\nPRM-FP-0102 (DSL parser)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:20:28.125705Z","created_by":"zac","updated_at":"2026-02-26T11:20:57.773313Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-22r","depends_on_id":"bd-f6u","type":"blocks","created_at":"2026-02-26T11:20:57.773260Z","created_by":"zac"}]}
{"id":"bd-23q","title":"PRM-FP-0101a: Document dispatch + raw","description":"Fill in document/dispatch.rs (Document enum, Document::open() format dispatch by extension) and document/raw.rs (RawDocument fallback). Uses stub types from scaffold for Xlsx/Csv/Pdf variants.\n\nFILES: src/document/dispatch.rs, src/document/raw.rs (2 files)\nVERIFY: cargo test --lib -- document::dispatch && cargo test --lib -- document::raw","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:26.602510Z","created_by":"zac","updated_at":"2026-02-26T11:32:34.503697Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-23q","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:20:57.157930Z","created_by":"zac"}]}
{"id":"bd-25m","title":"PRM-FP-0107c: Pipeline parallel (parallel.rs)","description":"Fill in pipeline/parallel.rs: --jobs N parallel workers with bounded reorder buffer. Output order MUST match input order. Buffer bounds in-flight work (no unbounded growth). FILE: src/pipeline/parallel.rs (1 file). VERIFY: cargo test --lib -- pipeline::parallel","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:47:48.632468Z","created_by":"zac","updated_at":"2026-02-26T11:48:29.391039Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-25m","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:29.390994Z","created_by":"zac"}]}
{"id":"bd-2c7","title":"PRM-FP-0100b: CLI args (cli/args.rs)","description":"Fill in cli/args.rs: full clap derive Cli struct, Command enum (Compile, Witness), WitnessAction enum per PLAN.md. FILE: src/cli/args.rs (1 file). VERIFY: cargo test --lib -- cli::args","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:35:23.534614Z","created_by":"zac","updated_at":"2026-02-26T11:48:28.793412Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2c7","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:28.793369Z","created_by":"zac"}]}
{"id":"bd-2fj","title":"PRM-FP-0001: Release infra parity audit vs rvl","description":"Audit fingerprint release/build automation against rvl baseline and produce an actionable parity matrix. Scope is documentation + bead planning only; no workflow code changes in this issue.\n\n## Acceptance Criteria\n- Create docs/RELEASE_PARITY_AUDIT.md with side-by-side matrix (ci.yml, release.yml, checksums/signing, SBOM/provenance, Homebrew update path); classify each row as keep/adapt/defer with rationale; link each open gap to a specific bead ID and confirm no unmatched gaps remain.\n\n## Notes\nBoundary: repo automation parity only. Do not change fingerprint runtime/spec behavior in this bead.","acceptance_criteria":"Create docs/RELEASE_PARITY_AUDIT.md with side-by-side matrix (ci.yml, release.yml, checksums/signing, SBOM/provenance, Homebrew update path); classify each row as keep/adapt/defer with rationale; link each open gap to a specific bead ID and confirm no unmatched gaps remain.","notes":"Boundary: repo automation parity only. Do not change fingerprint runtime/spec behavior in this bead.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-25T03:58:30.780902Z","created_by":"zac","updated_at":"2026-02-26T11:21:06.536470Z","compaction_level":0,"original_size":0,"labels":["infra","parity","release"]}
{"id":"bd-2hm","title":"PRM-FP-0101b: XLSX document (document/xlsx.rs)","description":"Fill in document/xlsx.rs: XlsxDocument with calamine — list sheets, read cell by address, read range, sheet row count. No panics on malformed files. FILE: src/document/xlsx.rs (1 file). VERIFY: cargo test --lib -- document::xlsx","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:46:01.769860Z","created_by":"zac","updated_at":"2026-02-26T11:48:28.906058Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2hm","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:28.906012Z","created_by":"zac"}]}
{"id":"bd-2ka","title":"PRM-FP-0009: Add golden-output determinism tests","description":"Add deterministic golden-output tests for JSONL and witness-record schema shape.\n\n## Acceptance Criteria\n- Create golden fixtures for matched, no-match, skipped, and refusal outputs; assert byte-stable JSONL serialization and content_hash determinism for identical inputs; assert witness record schema fields and stable key presence/order expectations used by downstream tools; include fixture regeneration instructions.\n\n## Notes\nBoundary: golden determinism only; command-surface smoke semantics belong in PRM-FP-0008.","acceptance_criteria":"Create golden fixtures for matched, no-match, skipped, and refusal outputs; assert byte-stable JSONL serialization and content_hash determinism for identical inputs; assert witness record schema fields and stable key presence/order expectations used by downstream tools; include fixture regeneration instructions.","notes":"Boundary: golden determinism only; command-surface smoke semantics belong in PRM-FP-0008.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T03:58:31.128628Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.696907Z","compaction_level":0,"original_size":0,"labels":["determinism","golden","tests"],"dependencies":[{"issue_id":"bd-2ka","depends_on_id":"bd-14l","type":"blocks","created_at":"2026-02-25T04:04:32.048444Z","created_by":"zac"},{"issue_id":"bd-2ka","depends_on_id":"bd-9in","type":"blocks","created_at":"2026-02-25T04:02:09.819515Z","created_by":"zac"},{"issue_id":"bd-2ka","depends_on_id":"bd-tdc","type":"blocks","created_at":"2026-02-26T11:21:23.696866Z","created_by":"zac"}]}
{"id":"bd-2ly","title":"PRM-FP-0200: fingerprint infer subcommand","description":"New third mode: learn fingerprint definitions from a corpus of example files. Deterministic corpus observation — no ML, no document content stored or transmitted. Zero-retention safe.\n\n## CLI\nfingerprint infer <DIR> --format <xlsx|csv|pdf> --id <name> [--min-confidence 0.9] [--no-extract] [--out <path>]\n\n## Algorithm\n1. Scan DIR for files matching --format\n2. Open each via Document::open() (same abstraction as run mode)\n3. Observe structural facts per file: sheet names, cell values at common positions, range population, row counts, filename patterns\n4. Aggregate across corpus: keep invariants above --min-confidence threshold\n5. Emit .fp.yaml with confidence annotations as YAML comments\n6. Optionally suggest extract sections (--no-extract to skip)\n7. Append witness record (tool: fingerprint, params: {mode: infer, corpus_size: N})\n\n## Structural facts observed (per format)\n- xlsx: sheet_exists, cell_eq, cell_regex (detect patterns across varying values), sheet_name_regex, range_non_null, sheet_min_rows\n- csv: filename_regex, header patterns, row count floor, column non-null rates\n- pdf: page count range, metadata field patterns, form field presence\n\n## Files\nsrc/infer/mod.rs (new), src/infer/observer.rs (per-file observation), src/infer/aggregator.rs (cross-corpus statistics), src/infer/emitter.rs (YAML generation with confidence comments). Also touches: src/cli/args.rs (add Infer variant to Command), src/lib.rs (add pub mod infer + dispatch).\n\n## Acceptance criteria\n- fingerprint infer tests/fixtures/ --format xlsx --id test produces valid .fp.yaml\n- Output YAML is valid input to fingerprint compile\n- Deterministic: same corpus same order = identical YAML\n- Confidence annotations present as comments\n- --min-confidence filters low-confidence assertions\n- --no-extract omits extract/content_hash sections\n- No document content in output (only structural metadata: sheet names, cell addresses, expected values, thresholds)\n- Witness record appended\n\n## Verification\ncargo test --lib -- infer && fingerprint infer tests/fixtures/ --format xlsx --id test-inferred | head -20","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T12:20:27.214529Z","created_by":"zac","updated_at":"2026-02-26T12:20:38.774295Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2ly","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T12:20:38.496243Z","created_by":"zac"},{"issue_id":"bd-2ly","depends_on_id":"bd-23q","type":"blocks","created_at":"2026-02-26T12:20:38.608146Z","created_by":"zac"},{"issue_id":"bd-2ly","depends_on_id":"bd-2c7","type":"blocks","created_at":"2026-02-26T12:20:38.552068Z","created_by":"zac"},{"issue_id":"bd-2ly","depends_on_id":"bd-2hm","type":"blocks","created_at":"2026-02-26T12:20:38.664126Z","created_by":"zac"},{"issue_id":"bd-2ly","depends_on_id":"bd-ojz","type":"blocks","created_at":"2026-02-26T12:20:38.719479Z","created_by":"zac"},{"issue_id":"bd-2ly","depends_on_id":"bd-q7t","type":"blocks","created_at":"2026-02-26T12:20:38.774258Z","created_by":"zac"}]}
{"id":"bd-2p6","title":"PRM-FP-0002: Add rvl-style CI workflow baseline","description":"Implement baseline CI workflow parity with rvl for quality gates (fmt/clippy/test + basic binary smoke where applicable). This issue does not publish releases or manage tap updates.\n\n## Acceptance Criteria\n- Add .github/workflows/ci.yml; workflow runs on push and pull_request to main; includes fmt/clippy/test jobs and a final aggregate success gate; includes cross-platform build smoke on release/tag path (version/help); workflow YAML validates and executes without syntax/runtime errors.\n\n## Notes\nNon-goal: release publishing, signing, SBOM/provenance, or Homebrew updates.","acceptance_criteria":"Add .github/workflows/ci.yml; workflow runs on push and pull_request to main; includes fmt/clippy/test jobs and a final aggregate success gate; includes cross-platform build smoke on release/tag path (version/help); workflow YAML validates and executes without syntax/runtime errors.","notes":"Non-goal: release publishing, signing, SBOM/provenance, or Homebrew updates.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T03:58:30.824185Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.401563Z","compaction_level":0,"original_size":0,"labels":["ci","infra","release"],"dependencies":[{"issue_id":"bd-2p6","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:21:23.401521Z","created_by":"zac"}]}
{"id":"bd-374","title":"PRM-FP-0100c: CLI exit codes (cli/exit.rs)","description":"Fill in cli/exit.rs: Outcome enum (AllMatched, Partial, Refusal) with exit_code() → u8 mapping (0/1/2). FILE: src/cli/exit.rs (1 file). VERIFY: cargo test --lib -- cli::exit","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:35:37.352308Z","created_by":"zac","updated_at":"2026-02-26T11:48:28.849981Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-374","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:28.849931Z","created_by":"zac"}]}
{"id":"bd-38g","title":"PRM-FP-0104b: Output JSONL (output/jsonl.rs)","description":"Fill in output/jsonl.rs: serialize enriched JSONL records to stdout, one per line. Handle both normal records and refusal envelopes. FILE: src/output/jsonl.rs (1 file). VERIFY: cargo test --lib -- output::jsonl","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:47:21.690386Z","created_by":"zac","updated_at":"2026-02-26T11:48:29.123047Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-38g","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:29.122999Z","created_by":"zac"}]}
{"id":"bd-3cv","title":"PRM-FP-0107b: Pipeline reader (reader.rs)","description":"Fill in pipeline/reader.rs: parse JSONL from stdin or file, validate version field, validate bytes_hash on non-skipped records. Return typed errors for E_BAD_INPUT cases. FILE: src/pipeline/reader.rs (1 file). VERIFY: cargo test --lib -- pipeline::reader","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:47:48.579222Z","created_by":"zac","updated_at":"2026-02-26T11:48:29.336050Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3cv","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:29.336004Z","created_by":"zac"}]}
{"id":"bd-3j6","title":"PRM-FP-0010: Enforce coverage in CI","description":"Enforce required test suites in CI after suite implementation is complete.\n\n## Acceptance Criteria\n- CI fails if unit/integration/smoke/golden suites fail or are skipped; CI summary clearly reports each suite status; protection-ready aggregate job exists for branch rules; documentation describes required suites and local command to reproduce gates.\n\n## Notes\nDepends on CI baseline and all test-suite beads; this issue should only wire enforcement, not invent new tests.","acceptance_criteria":"CI fails if unit/integration/smoke/golden suites fail or are skipped; CI summary clearly reports each suite status; protection-ready aggregate job exists for branch rules; documentation describes required suites and local command to reproduce gates.","notes":"Depends on CI baseline and all test-suite beads; this issue should only wire enforcement, not invent new tests.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-25T03:58:31.169547Z","created_by":"zac","updated_at":"2026-02-26T11:48:39.989107Z","compaction_level":0,"original_size":0,"labels":["ci","coverage","tests"],"dependencies":[{"issue_id":"bd-3j6","depends_on_id":"bd-18y","type":"blocks","created_at":"2026-02-25T03:58:43.667929Z","created_by":"zac"},{"issue_id":"bd-3j6","depends_on_id":"bd-1rw","type":"blocks","created_at":"2026-02-26T11:48:39.989065Z","created_by":"zac"},{"issue_id":"bd-3j6","depends_on_id":"bd-1zd","type":"blocks","created_at":"2026-02-25T03:58:43.626258Z","created_by":"zac"},{"issue_id":"bd-3j6","depends_on_id":"bd-2ka","type":"blocks","created_at":"2026-02-25T03:58:43.751361Z","created_by":"zac"},{"issue_id":"bd-3j6","depends_on_id":"bd-2p6","type":"blocks","created_at":"2026-02-25T04:04:32.185283Z","created_by":"zac"},{"issue_id":"bd-3j6","depends_on_id":"bd-kmi","type":"blocks","created_at":"2026-02-25T03:58:43.706663Z","created_by":"zac"}]}
{"id":"bd-3o0","title":"PRM-FP-0004: Wire Homebrew release path parity","description":"Add Homebrew/tap update path parity using produced release artifacts and checksums from release workflow.\n\n## Acceptance Criteria\n- Workflow/job updates fingerprint formula with current version and per-target checksums; automation references published release artifacts and SHA256SUMS; resulting formula supports install verification path equivalent to rvl tap behavior; dry-run/validation step confirms generated formula syntax and URLs.\n\n## Notes\nBoundary: formula automation only; avoid rebuilding release artifacts in this bead.","acceptance_criteria":"Workflow/job updates fingerprint formula with current version and per-target checksums; automation references published release artifacts and SHA256SUMS; resulting formula supports install verification path equivalent to rvl tap behavior; dry-run/validation step confirms generated formula syntax and URLs.","notes":"Boundary: formula automation only; avoid rebuilding release artifacts in this bead.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T03:58:30.908642Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.748488Z","compaction_level":0,"original_size":0,"labels":["brew","infra","release"],"dependencies":[{"issue_id":"bd-3o0","depends_on_id":"bd-poy","type":"blocks","created_at":"2026-02-25T04:04:32.137286Z","created_by":"zac"}]}
{"id":"bd-3pe","title":"PRM-FP-0106b: Registry builtins (builtin.rs)","description":"Fill in registry/builtin.rs: hand-coded Rust implementations of core fingerprints (csv.v0, xlsx.v0, pdf.v0). Each implements the Fingerprint trait directly — no DSL parser dependency for v0.1. Simple format-matching + basic structural checks. FILE: src/registry/builtin.rs (1 file). VERIFY: cargo test --lib -- registry::builtin","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:47:40.093505Z","created_by":"zac","updated_at":"2026-02-26T11:48:29.282114Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3pe","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:29.282067Z","created_by":"zac"}]}
{"id":"bd-3qx","title":"PRM-FP-0103b: DSL extract + content hash","description":"Fill in dsl/extract.rs (content extraction from matched documents into HashMap) and dsl/content_hash.rs (BLAKE3 over extracted sections, deterministic). Same doc + same fp + same extraction = same hash. FILES: src/dsl/extract.rs, src/dsl/content_hash.rs (2 files). VERIFY: cargo test --lib -- dsl::extract && cargo test --lib -- dsl::content_hash","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:47:12.605883Z","created_by":"zac","updated_at":"2026-02-26T11:48:29.069433Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3qx","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:29.069364Z","created_by":"zac"}]}
{"id":"bd-3v7","title":"PRM-FP-0103a: DSL assertions","description":"Fill in dsl/assertions.rs: Assertion enum evaluate() for all 7 v0.1 types (filename_regex, sheet_exists, sheet_name_regex, cell_eq, cell_regex, range_non_null, sheet_min_rows). Short-circuit on first failure. Uses Document stub methods from scaffold; agent creates inline test fixtures.\n\nFILE: src/dsl/assertions.rs (1 file)\nVERIFY: cargo test --lib -- dsl::assertions","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:43.134067Z","created_by":"zac","updated_at":"2026-02-26T11:48:59.342233Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3v7","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:59.342186Z","created_by":"zac"}]}
{"id":"bd-412","title":"PRM-FP-0005: Test coverage parity plan vs rvl","description":"Audit current fingerprint tests against rvl coverage model (unit, integration, smoke, golden, witness command coverage). Produce missing-test matrix and convert it into executable test beads.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T03:58:30.953053Z","created_by":"zac","updated_at":"2026-02-25T04:02:20.777981Z","closed_at":"2026-02-25T04:02:20.777887Z","close_reason":"parity matrix completed and gaps converted to executable beads","compaction_level":0,"original_size":0,"labels":["coverage","parity","tests"],"comments":[{"id":1,"issue_id":"bd-412","author":"Zac","text":"Completed PRM-FP-0005 parity review. Added docs/TEST_COVERAGE_PARITY.md with evidence-based matrix versus rvl (213 src tests, 111 integration tests, 120 fixture files baseline vs 0 today in fingerprint). Confirmed all identified gaps are mapped to executable beads; added bd-9in for fixture corpus and linked dependencies from bd-1zd/bd-18y/bd-kmi/bd-2ka.","created_at":"2026-02-25T04:02:20Z"}]}
{"id":"bd-9in","title":"PRM-FP-0011: Build core fixture corpus for fingerprint tests","description":"Create core fixture corpus required for initial unit/integration/smoke/golden bring-up: representative csv/xlsx/pdf samples, hashed manifests, and minimal skipped/refusal triggers.\n\n## Acceptance Criteria\n- Add tests/fixtures with core happy-path files for csv/xlsx/pdf; add hashed manifest fixtures for pipeline tests; add at least one corrupt/parse-fail fixture and one malformed-input manifest fixture for refusal path; document fixture inventory in tests/fixtures/README.md with intended test usage.\n\n## Notes\nKeep scope to core bring-up corpus; advanced edge-case fixtures move to PRM-FP-0012.","acceptance_criteria":"Add tests/fixtures with core happy-path files for csv/xlsx/pdf; add hashed manifest fixtures for pipeline tests; add at least one corrupt/parse-fail fixture and one malformed-input manifest fixture for refusal path; document fixture inventory in tests/fixtures/README.md with intended test usage.","notes":"Keep scope to core bring-up corpus; advanced edge-case fixtures move to PRM-FP-0012.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:01:59.988470Z","created_by":"zac","updated_at":"2026-02-25T04:05:40.634712Z","compaction_level":0,"original_size":0,"labels":["fixtures","parity","tests"]}
{"id":"bd-f6u","title":"PRM-FP-0102: DSL parser","description":"Parse .fp.yaml fingerprint definitions into typed Rust structs: fingerprint_id, format, assertions list, extract sections, content_hash config.\n\n## Files touched\nsrc/dsl/mod.rs, src/dsl/parser.rs\n\n## Acceptance Criteria\n- Parses the argus-model.fp.yaml example from PLAN.md correctly\n- All v0.1 assertion types deserialize: filename_regex, sheet_exists, sheet_name_regex, cell_eq, cell_regex, range_non_null, sheet_min_rows\n- Extract sections parsed into typed structs\n- Content hash config (algorithm, over fields) parsed\n- Returns typed error for malformed YAML (E_INVALID_YAML, E_UNKNOWN_ASSERTION, E_MISSING_FIELD)\n- Unit tests for valid and invalid YAML inputs\n- Deferred assertions (range_populated, sum_eq, within_tolerance) rejected with clear error\n\n## Depends on\nPRM-FP-0100 (scaffold)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:34.685806Z","created_by":"zac","updated_at":"2026-02-26T11:20:57.208049Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-f6u","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:20:57.208008Z","created_by":"zac"}]}
{"id":"bd-hwe","title":"PRM-FP-0107a: Pipeline enricher","description":"Fill in pipeline/enricher.rs: for each JSONL record, try --fp list in order (first match wins), build fingerprint result. Handles upstream _skipped passthrough and new _skipped for IO/parse failures. Updates version to fingerprint.v0, merges tool_versions.\n\nFILE: src/pipeline/enricher.rs (1 file)\nVERIFY: cargo test --lib -- pipeline::enricher","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:20:20.224108Z","created_by":"zac","updated_at":"2026-02-26T11:48:39.546417Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-hwe","depends_on_id":"bd-1f0","type":"blocks","created_at":"2026-02-26T11:20:57.724037Z","created_by":"zac"},{"issue_id":"bd-hwe","depends_on_id":"bd-1um","type":"blocks","created_at":"2026-02-26T11:20:57.674672Z","created_by":"zac"},{"issue_id":"bd-hwe","depends_on_id":"bd-23q","type":"blocks","created_at":"2026-02-26T11:20:57.624415Z","created_by":"zac"},{"issue_id":"bd-hwe","depends_on_id":"bd-38g","type":"blocks","created_at":"2026-02-26T11:48:39.489128Z","created_by":"zac"},{"issue_id":"bd-hwe","depends_on_id":"bd-3pe","type":"blocks","created_at":"2026-02-26T11:48:39.546376Z","created_by":"zac"}]}
{"id":"bd-kmi","title":"PRM-FP-0008: Add smoke tests for CLI surfaces","description":"Add smoke/E2E tests for CLI surfaces and witness subcommands.\n\n## Acceptance Criteria\n- Add smoke tests covering run mode invocation, compile mode invocation (including --check), --list, --describe, --schema, and witness query/last/count; assert documented exit-code routing (0/1/2) at process boundary; tests execute the built binary in temp workspace and avoid reliance on external services.\n\n## Notes\nNon-goal: byte-stable golden snapshots (handled by PRM-FP-0009).","acceptance_criteria":"Add smoke tests covering run mode invocation, compile mode invocation (including --check), --list, --describe, --schema, and witness query/last/count; assert documented exit-code routing (0/1/2) at process boundary; tests execute the built binary in temp workspace and avoid reliance on external services.","notes":"Non-goal: byte-stable golden snapshots (handled by PRM-FP-0009).","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T03:58:31.085316Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.645806Z","compaction_level":0,"original_size":0,"labels":["cli","smoke","tests"],"dependencies":[{"issue_id":"bd-kmi","depends_on_id":"bd-14l","type":"blocks","created_at":"2026-02-25T04:04:32.004569Z","created_by":"zac"},{"issue_id":"bd-kmi","depends_on_id":"bd-9in","type":"blocks","created_at":"2026-02-25T04:02:09.776223Z","created_by":"zac"},{"issue_id":"bd-kmi","depends_on_id":"bd-tdc","type":"blocks","created_at":"2026-02-26T11:21:23.645766Z","created_by":"zac"}]}
{"id":"bd-ojz","title":"PRM-FP-0101c: CSV document (document/csv.rs)","description":"Fill in document/csv.rs: CsvDocument with csv crate — read headers, iterate rows, cell access by column. FILE: src/document/csv.rs (1 file). VERIFY: cargo test --lib -- document::csv","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:46:01.826896Z","created_by":"zac","updated_at":"2026-02-26T11:48:28.960561Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-ojz","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:28.960510Z","created_by":"zac"}]}
{"id":"bd-poy","title":"PRM-FP-0013: Release attestations and signing parity","description":"Add supply-chain release artifacts after base release workflow: checksums, signatures, SBOM, and provenance.\n\n## Acceptance Criteria\n- Release workflow emits SHA256SUMS over distributable archives; cosign signature/certificate artifacts are published with release; CycloneDX SBOM artifact is published with release; provenance statement artifact is published with release; failures in these steps fail the release job.\n\n## Notes\nDepends on base release workflow; do not duplicate build-matrix logic here.","acceptance_criteria":"Release workflow emits SHA256SUMS over distributable archives; cosign signature/certificate artifacts are published with release; CycloneDX SBOM artifact is published with release; provenance statement artifact is published with release; failures in these steps fail the release job.","notes":"Depends on base release workflow; do not duplicate build-matrix logic here.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T04:04:27.633302Z","created_by":"zac","updated_at":"2026-02-25T04:05:41.202759Z","compaction_level":0,"original_size":0,"labels":["release","security","supply-chain"],"dependencies":[{"issue_id":"bd-poy","depends_on_id":"bd-w5b","type":"blocks","created_at":"2026-02-25T04:04:32.093359Z","created_by":"zac"}]}
{"id":"bd-q7t","title":"PRM-FP-0101d: PDF document (document/pdf.rs)","description":"Fill in document/pdf.rs: PdfDocument with lopdf — page count, metadata access, basic structural queries. FILE: src/document/pdf.rs (1 file). VERIFY: cargo test --lib -- document::pdf","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:46:01.884626Z","created_by":"zac","updated_at":"2026-02-26T11:48:29.015439Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-q7t","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:29.015391Z","created_by":"zac"}]}
{"id":"bd-tdc","title":"PRM-FP-0109: Orchestration (lib.rs wiring)","description":"Wire pub fn run() → u8 in lib.rs: CLI dispatch → registry build → pipeline execution → witness append → exit code. Connect all modules into the final binary.\n\n## Files touched\nsrc/lib.rs (full implementation replacing stub)\n\n## Acceptance Criteria\n- pub fn run() → u8 handles full execution flow from PLAN.md section 'Execution flow (run mode)' steps 1-12\n- CLI dispatch: --version (clap), --describe, --schema, --list, witness subcommands, compile subcommand, run mode\n- Registry build with E_UNKNOWN_FP / E_DUPLICATE_FP_ID / E_UNTRUSTED_FP handling\n- Pipeline execution with correct exit code routing (0=ALL_MATCHED, 1=PARTIAL, 2=REFUSAL)\n- Witness append after pipeline (unless --no-witness)\n- Compile subcommand dispatch\n- E2E test: echo hashed JSONL | fingerprint --fp csv.v0 produces enriched output\n- E2E test: fingerprint --list shows built-in fingerprints\n- E2E test: invalid input → exit 2 with refusal envelope\n\n## Depends on\nPRM-FP-0100 (scaffold+CLI), PRM-FP-0105 (witness), PRM-FP-0107 (pipeline), PRM-FP-0108 (compile)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:20:38.395272Z","created_by":"zac","updated_at":"2026-02-26T11:48:39.819637Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-tdc","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:20:57.822644Z","created_by":"zac"},{"issue_id":"bd-tdc","depends_on_id":"bd-22r","type":"blocks","created_at":"2026-02-26T11:20:57.968488Z","created_by":"zac"},{"issue_id":"bd-tdc","depends_on_id":"bd-25m","type":"blocks","created_at":"2026-02-26T11:48:39.764684Z","created_by":"zac"},{"issue_id":"bd-tdc","depends_on_id":"bd-2c7","type":"blocks","created_at":"2026-02-26T11:48:39.600282Z","created_by":"zac"},{"issue_id":"bd-tdc","depends_on_id":"bd-374","type":"blocks","created_at":"2026-02-26T11:48:39.655797Z","created_by":"zac"},{"issue_id":"bd-tdc","depends_on_id":"bd-3cv","type":"blocks","created_at":"2026-02-26T11:48:39.710041Z","created_by":"zac"},{"issue_id":"bd-tdc","depends_on_id":"bd-hwe","type":"blocks","created_at":"2026-02-26T11:20:57.917210Z","created_by":"zac"},{"issue_id":"bd-tdc","depends_on_id":"bd-w2c","type":"blocks","created_at":"2026-02-26T11:48:39.819590Z","created_by":"zac"}]}
{"id":"bd-w2c","title":"PRM-FP-0105b: Witness ledger + query","description":"Fill in witness/ledger.rs (append to EPISTEMIC_WITNESS or ~/.epistemic/witness.jsonl, --no-witness suppression, non-fatal failures) and witness/query.rs (witness query/last/count subcommands with filters). FILES: src/witness/ledger.rs, src/witness/query.rs (2 files). VERIFY: cargo test --lib -- witness::ledger && cargo test --lib -- witness::query","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:47:32.096634Z","created_by":"zac","updated_at":"2026-02-26T11:48:39.434413Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-w2c","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:29.229538Z","created_by":"zac"},{"issue_id":"bd-w2c","depends_on_id":"bd-1pi","type":"blocks","created_at":"2026-02-26T11:48:39.434373Z","created_by":"zac"}]}
{"id":"bd-w5b","title":"PRM-FP-0003: Add base release workflow (build + publish artifacts)","description":"Implement base release workflow parity with rvl: build target matrix archives and publish GitHub release assets. Keep this issue focused on build/publish mechanics only.\n\n## Acceptance Criteria\n- Add .github/workflows/release.yml; workflow derives version from Cargo.toml and ensures tag exists; builds release archives for target matrix and uploads them to GitHub release; generated artifacts are downloadable from release page; no signing/SBOM/provenance steps in this bead (handled separately).\n\n## Notes\nNon-goal: cosign, SHA256SUMS signing, SBOM/provenance generation, or Homebrew formula update.","acceptance_criteria":"Add .github/workflows/release.yml; workflow derives version from Cargo.toml and ensures tag exists; builds release archives for target matrix and uploads them to GitHub release; generated artifacts are downloadable from release page; no signing/SBOM/provenance steps in this bead (handled separately).","notes":"Non-goal: cosign, SHA256SUMS signing, SBOM/provenance generation, or Homebrew formula update.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T03:58:30.864567Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.452717Z","compaction_level":0,"original_size":0,"labels":["infra","release","workflow"],"dependencies":[{"issue_id":"bd-w5b","depends_on_id":"bd-tdc","type":"blocks","created_at":"2026-02-26T11:21:23.452677Z","created_by":"zac"}]}
{"id":"bd-zg8","title":"PRM-FP-0104c: Progress reporter (progress/reporter.rs)","description":"Fill in progress/reporter.rs: emit structured progress JSONL to stderr when --progress is set. Warning emission for skipped files. FILE: src/progress/reporter.rs (1 file). VERIFY: cargo test --lib -- progress::reporter","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:47:21.744035Z","created_by":"zac","updated_at":"2026-02-26T11:48:29.176667Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-zg8","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:48:29.176622Z","created_by":"zac"}]}
