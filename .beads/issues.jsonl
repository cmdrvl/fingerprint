{"id":"bd-14l","title":"PRM-FP-0012: Extend fixtures with refusal/witness edge cases","description":"Extend fixtures with deeper refusal and witness edge cases after core corpus is in place.\n\n## Acceptance Criteria\n- Add fixtures for unsupported formats, version-mismatch input, duplicate/invalid manifest lines, and witness-ledger query edge cases; include per-fixture intent notes in tests/fixtures/README.md; integration/smoke/golden beads can reference these fixtures without creating ad-hoc temp data.\n\n## Notes\nNon-goal: implement runtime logic changes; this bead is fixtures/documentation only.","acceptance_criteria":"Add fixtures for unsupported formats, version-mismatch input, duplicate/invalid manifest lines, and witness-ledger query edge cases; include per-fixture intent notes in tests/fixtures/README.md; integration/smoke/golden beads can reference these fixtures without creating ad-hoc temp data.","notes":"Non-goal: implement runtime logic changes; this bead is fixtures/documentation only.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T04:04:27.585284Z","created_by":"zac","updated_at":"2026-02-25T04:05:41.284228Z","compaction_level":0,"original_size":0,"labels":["fixtures","tests","witness"],"dependencies":[{"issue_id":"bd-14l","depends_on_id":"bd-9in","type":"blocks","created_at":"2026-02-25T04:04:31.913482Z","created_by":"zac"}]}
{"id":"bd-18y","title":"PRM-FP-0007: Add integration tests for pipeline run mode","description":"Add integration tests for core run-mode pipeline behavior from hashed JSONL input to fingerprint JSONL output (using core fixtures).\n\n## Acceptance Criteria\n- Cover all-matched path (exit 0), partial no-match or skipped path (exit 1), and refusal path (exit 2); verify passthrough of upstream _skipped records and creation of new _skipped for parse failures; assert output ordering is preserved under >1 worker setting; assert refusal envelope shape for E_BAD_INPUT/E_UNKNOWN_FP using core fixture corpus.\n\n## Notes\nBoundary: run mode core behavior only; deeper refusal/witness edge-case fixture expansion remains in PRM-FP-0012.","acceptance_criteria":"Cover all-matched path (exit 0), partial no-match or skipped path (exit 1), and refusal path (exit 2); verify passthrough of upstream _skipped records and creation of new _skipped for parse failures; assert output ordering is preserved under >1 worker setting; assert refusal envelope shape for E_BAD_INPUT/E_UNKNOWN_FP using core fixture corpus.","notes":"Boundary: run mode core behavior only; deeper refusal/witness edge-case fixture expansion remains in PRM-FP-0012.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T03:58:31.041415Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.612241Z","compaction_level":0,"original_size":0,"labels":["integration","pipeline","tests"],"dependencies":[{"issue_id":"bd-18y","depends_on_id":"bd-9in","type":"blocks","created_at":"2026-02-25T04:02:09.730892Z","created_by":"zac"},{"issue_id":"bd-18y","depends_on_id":"bd-hwe","type":"blocks","created_at":"2026-02-26T11:21:23.612200Z","created_by":"zac"}]}
{"id":"bd-1bm","title":"PRM-FP-0100: Scaffold + CLI module","description":"Bootstrap the fingerprint crate: Cargo.toml (all deps from PLAN.md), src/main.rs (≤15 lines, forbid unsafe_code), src/lib.rs (stub returning exit 0), src/cli/mod.rs, src/cli/args.rs (full clap derive Cli/Command/WitnessAction per PLAN.md), src/cli/exit.rs (Outcome enum → exit code mapping), operator.json (from PLAN.md spec). Profile.release per AGENTS.md.\n\n## Acceptance Criteria\n- cargo build succeeds with zero warnings\n- cargo clippy --all-targets -- -D warnings passes\n- fingerprint --version prints semver\n- fingerprint --describe prints operator.json\n- fingerprint --schema prints JSON schema stub\n- Cli struct parses all flags from PLAN.md CLI section\n- Outcome enum maps 0/1/2 correctly\n- src/main.rs ≤15 lines\n\n## Files touched\nCargo.toml, src/main.rs, src/lib.rs, src/cli/mod.rs, src/cli/args.rs, src/cli/exit.rs, operator.json","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:18.020054Z","created_by":"zac","updated_at":"2026-02-26T11:19:18.020054Z","compaction_level":0,"original_size":0}
{"id":"bd-1f0","title":"PRM-FP-0106: Fingerprint registry","description":"FingerprintRegistry: resolution, listing, duplicate/trust validation, and built-in fingerprint construction.\n\n## Files touched\nsrc/registry/mod.rs, src/registry/registry.rs, src/registry/builtin.rs, src/registry/installed.rs\n\n## Acceptance Criteria\n- FingerprintRegistry holds Vec<Box<dyn Fingerprint>>, implements get(id) and list()\n- Resolution order: built-in → installed crates (FINGERPRINT_PATH deferred for v0.1)\n- E_DUPLICATE_FP_ID: startup fails if same ID from multiple providers\n- E_UNTRUSTED_FP: external crates require allowlisting\n- Built-in fingerprints: csv.v0, xlsx.v0, pdf.v0 (constructed from DSL)\n- --list enumerates all available fingerprints with id/crate/version/source/format\n- FingerprintInfo struct per PLAN.md\n- installed.rs: discovery of installed fingerprint crates via cargo install paths (stub OK for v0.1, full discovery deferred)\n- Unit tests for resolution, duplicate detection, trust boundary\n\n## Depends on\nPRM-FP-0101 (document), PRM-FP-0102 (DSL parser), PRM-FP-0103 (DSL evaluation)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:20:08.837681Z","created_by":"zac","updated_at":"2026-02-26T11:20:57.572283Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1f0","depends_on_id":"bd-23q","type":"blocks","created_at":"2026-02-26T11:20:57.470102Z","created_by":"zac"},{"issue_id":"bd-1f0","depends_on_id":"bd-3v7","type":"blocks","created_at":"2026-02-26T11:20:57.572243Z","created_by":"zac"},{"issue_id":"bd-1f0","depends_on_id":"bd-f6u","type":"blocks","created_at":"2026-02-26T11:20:57.521729Z","created_by":"zac"}]}
{"id":"bd-1pi","title":"PRM-FP-0105: Witness module","description":"Witness ledger: record creation, append, and query/last/count subcommands per spine witness.v0 schema.\n\n## Files touched\nsrc/witness/mod.rs, src/witness/record.rs, src/witness/ledger.rs, src/witness/query.rs\n\n## Acceptance Criteria\n- WitnessRecord struct matches witness.v0 schema from PLAN.md (id, tool, version, binary_hash, inputs, params, outcome, exit_code, output_hash, prev, ts)\n- Record ID is BLAKE3 hash\n- Ledger appends to EPISTEMIC_WITNESS env var path or ~/.epistemic/witness.jsonl\n- --no-witness suppresses append\n- Witness failures are non-fatal (do not mutate domain outcome)\n- witness query: filter by tool/outcome\n- witness last: return most recent record\n- witness count: count records with optional filters\n- Compile mode does NOT produce witness records\n- Unit tests for record creation and ledger append\n\n## Depends on\nPRM-FP-0100 (scaffold)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:59.292100Z","created_by":"zac","updated_at":"2026-02-26T11:20:57.418923Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1pi","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:20:57.418878Z","created_by":"zac"}]}
{"id":"bd-1um","title":"PRM-FP-0104: Refusal + Output + Progress modules","description":"Three small peripheral modules: refusal envelope construction, JSONL output serialization, and structured progress reporting.\n\n## Files touched\nsrc/refusal/mod.rs, src/refusal/codes.rs, src/refusal/payload.rs, src/output/mod.rs, src/output/jsonl.rs, src/progress/mod.rs, src/progress/reporter.rs\n\n## Acceptance Criteria\n- RefusalCode enum: E_BAD_INPUT, E_UNKNOWN_FP, E_DUPLICATE_FP_ID, E_UNTRUSTED_FP (run mode) + E_INVALID_YAML, E_UNKNOWN_ASSERTION, E_MISSING_FIELD (compile mode)\n- RefusalPayload builds valid envelope per PLAN.md schema (version, outcome, refusal object with code/message/detail/next_command)\n- JSONL output: serialize enriched records to stdout, one per line\n- Progress reporter: emit structured progress JSONL to stderr when --progress is set\n- Warning emission to stderr for skipped files\n- Unit tests for refusal construction and JSONL serialization\n\n## Depends on\nPRM-FP-0100 (scaffold)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:51.199089Z","created_by":"zac","updated_at":"2026-02-26T11:20:57.368894Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1um","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:20:57.368849Z","created_by":"zac"}]}
{"id":"bd-1zd","title":"PRM-FP-0006: Build unit test suite for assertion engine","description":"Add unit tests for assertion engine and refusal-detail construction with deterministic outcomes.\n\n## Acceptance Criteria\n- Add unit tests for sheet_exists/cell_eq/cell_regex/range_non_null/sheet_min_rows and filename/sheet-name regex assertions; verify short-circuit behavior records skipped assertions deterministically; add refusal-detail tests for input validation errors with stable code+detail shape; tests run under cargo test without network/external dependencies.\n\n## Notes\nBoundary: unit-level behavior only, no end-to-end pipeline wiring in this bead.","acceptance_criteria":"Add unit tests for sheet_exists/cell_eq/cell_regex/range_non_null/sheet_min_rows and filename/sheet-name regex assertions; verify short-circuit behavior records skipped assertions deterministically; add refusal-detail tests for input validation errors with stable code+detail shape; tests run under cargo test without network/external dependencies.","notes":"Boundary: unit-level behavior only, no end-to-end pipeline wiring in this bead.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T03:58:30.996618Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.559889Z","compaction_level":0,"original_size":0,"labels":["tests","unit"],"dependencies":[{"issue_id":"bd-1zd","depends_on_id":"bd-1um","type":"blocks","created_at":"2026-02-26T11:21:23.559848Z","created_by":"zac"},{"issue_id":"bd-1zd","depends_on_id":"bd-3v7","type":"blocks","created_at":"2026-02-26T11:21:23.505659Z","created_by":"zac"},{"issue_id":"bd-1zd","depends_on_id":"bd-9in","type":"blocks","created_at":"2026-02-25T04:02:09.685652Z","created_by":"zac"}]}
{"id":"bd-22r","title":"PRM-FP-0108: Compile mode","description":"DSL-to-Rust crate generation: parse .fp.yaml, generate Cargo.toml + src/lib.rs implementing Fingerprint trait, embed compiler metadata.\n\n## Files touched\nsrc/compile/mod.rs, src/compile/codegen.rs, src/compile/crate_gen.rs\n\n## Acceptance Criteria\n- fingerprint compile test.fp.yaml --out dir/ generates valid Rust crate\n- Generated crate: Cargo.toml, src/lib.rs implementing Fingerprint trait, fixtures/ stubs\n- Embeds: compiler_version, source_hash (blake3 of canonicalized YAML), source: dsl\n- Deterministic: same YAML → same Rust source (byte-identical)\n- --check mode: validates YAML without generating code\n- Compile refusals: E_INVALID_YAML, E_UNKNOWN_ASSERTION, E_MISSING_FIELD\n- Exit codes: 0 (clean), 1 (warnings), 2 (refusal)\n- No witness records produced in compile mode\n- Unit tests for codegen determinism\n\n## Depends on\nPRM-FP-0102 (DSL parser)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:20:28.125705Z","created_by":"zac","updated_at":"2026-02-26T11:20:57.773313Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-22r","depends_on_id":"bd-f6u","type":"blocks","created_at":"2026-02-26T11:20:57.773260Z","created_by":"zac"}]}
{"id":"bd-23q","title":"PRM-FP-0101: Document abstraction","description":"Implement format-specific document access layer: Document enum (Xlsx, Csv, Pdf, Unknown variants), format dispatch from extension/mime_guess, all format parsers.\n\n## Files touched\nsrc/document/mod.rs, src/document/dispatch.rs, src/document/xlsx.rs (calamine lazy sheet access), src/document/csv.rs (header + streaming records), src/document/pdf.rs (lopdf structural access), src/document/raw.rs (raw bytes fallback)\n\n## Acceptance Criteria\n- Document::open(path) dispatches to correct variant by extension\n- XlsxDocument: list sheets, read cell, read range (via calamine)\n- CsvDocument: read headers, iterate rows\n- PdfDocument: page count, metadata access (via lopdf)\n- RawDocument: holds raw bytes\n- All variants expose path() method\n- Unit tests for each format using test fixtures\n- No panics on malformed files (return Result)\n\n## Depends on\nPRM-FP-0100 (scaffold)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:26.602510Z","created_by":"zac","updated_at":"2026-02-26T11:20:57.157976Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-23q","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:20:57.157930Z","created_by":"zac"}]}
{"id":"bd-2fj","title":"PRM-FP-0001: Release infra parity audit vs rvl","description":"Audit fingerprint release/build automation against rvl baseline and produce an actionable parity matrix. Scope is documentation + bead planning only; no workflow code changes in this issue.\n\n## Acceptance Criteria\n- Create docs/RELEASE_PARITY_AUDIT.md with side-by-side matrix (ci.yml, release.yml, checksums/signing, SBOM/provenance, Homebrew update path); classify each row as keep/adapt/defer with rationale; link each open gap to a specific bead ID and confirm no unmatched gaps remain.\n\n## Notes\nBoundary: repo automation parity only. Do not change fingerprint runtime/spec behavior in this bead.","acceptance_criteria":"Create docs/RELEASE_PARITY_AUDIT.md with side-by-side matrix (ci.yml, release.yml, checksums/signing, SBOM/provenance, Homebrew update path); classify each row as keep/adapt/defer with rationale; link each open gap to a specific bead ID and confirm no unmatched gaps remain.","notes":"Boundary: repo automation parity only. Do not change fingerprint runtime/spec behavior in this bead.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-25T03:58:30.780902Z","created_by":"zac","updated_at":"2026-02-26T11:21:06.536470Z","compaction_level":0,"original_size":0,"labels":["infra","parity","release"]}
{"id":"bd-2ka","title":"PRM-FP-0009: Add golden-output determinism tests","description":"Add deterministic golden-output tests for JSONL and witness-record schema shape.\n\n## Acceptance Criteria\n- Create golden fixtures for matched, no-match, skipped, and refusal outputs; assert byte-stable JSONL serialization and content_hash determinism for identical inputs; assert witness record schema fields and stable key presence/order expectations used by downstream tools; include fixture regeneration instructions.\n\n## Notes\nBoundary: golden determinism only; command-surface smoke semantics belong in PRM-FP-0008.","acceptance_criteria":"Create golden fixtures for matched, no-match, skipped, and refusal outputs; assert byte-stable JSONL serialization and content_hash determinism for identical inputs; assert witness record schema fields and stable key presence/order expectations used by downstream tools; include fixture regeneration instructions.","notes":"Boundary: golden determinism only; command-surface smoke semantics belong in PRM-FP-0008.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T03:58:31.128628Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.696907Z","compaction_level":0,"original_size":0,"labels":["determinism","golden","tests"],"dependencies":[{"issue_id":"bd-2ka","depends_on_id":"bd-14l","type":"blocks","created_at":"2026-02-25T04:04:32.048444Z","created_by":"zac"},{"issue_id":"bd-2ka","depends_on_id":"bd-9in","type":"blocks","created_at":"2026-02-25T04:02:09.819515Z","created_by":"zac"},{"issue_id":"bd-2ka","depends_on_id":"bd-tdc","type":"blocks","created_at":"2026-02-26T11:21:23.696866Z","created_by":"zac"}]}
{"id":"bd-2p6","title":"PRM-FP-0002: Add rvl-style CI workflow baseline","description":"Implement baseline CI workflow parity with rvl for quality gates (fmt/clippy/test + basic binary smoke where applicable). This issue does not publish releases or manage tap updates.\n\n## Acceptance Criteria\n- Add .github/workflows/ci.yml; workflow runs on push and pull_request to main; includes fmt/clippy/test jobs and a final aggregate success gate; includes cross-platform build smoke on release/tag path (version/help); workflow YAML validates and executes without syntax/runtime errors.\n\n## Notes\nNon-goal: release publishing, signing, SBOM/provenance, or Homebrew updates.","acceptance_criteria":"Add .github/workflows/ci.yml; workflow runs on push and pull_request to main; includes fmt/clippy/test jobs and a final aggregate success gate; includes cross-platform build smoke on release/tag path (version/help); workflow YAML validates and executes without syntax/runtime errors.","notes":"Non-goal: release publishing, signing, SBOM/provenance, or Homebrew updates.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T03:58:30.824185Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.401563Z","compaction_level":0,"original_size":0,"labels":["ci","infra","release"],"dependencies":[{"issue_id":"bd-2p6","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:21:23.401521Z","created_by":"zac"}]}
{"id":"bd-3j6","title":"PRM-FP-0010: Enforce coverage in CI","description":"Enforce required test suites in CI after suite implementation is complete.\n\n## Acceptance Criteria\n- CI fails if unit/integration/smoke/golden suites fail or are skipped; CI summary clearly reports each suite status; protection-ready aggregate job exists for branch rules; documentation describes required suites and local command to reproduce gates.\n\n## Notes\nDepends on CI baseline and all test-suite beads; this issue should only wire enforcement, not invent new tests.","acceptance_criteria":"CI fails if unit/integration/smoke/golden suites fail or are skipped; CI summary clearly reports each suite status; protection-ready aggregate job exists for branch rules; documentation describes required suites and local command to reproduce gates.","notes":"Depends on CI baseline and all test-suite beads; this issue should only wire enforcement, not invent new tests.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-25T03:58:31.169547Z","created_by":"zac","updated_at":"2026-02-25T04:07:30.887245Z","compaction_level":0,"original_size":0,"labels":["ci","coverage","tests"],"dependencies":[{"issue_id":"bd-3j6","depends_on_id":"bd-18y","type":"blocks","created_at":"2026-02-25T03:58:43.667929Z","created_by":"zac"},{"issue_id":"bd-3j6","depends_on_id":"bd-1zd","type":"blocks","created_at":"2026-02-25T03:58:43.626258Z","created_by":"zac"},{"issue_id":"bd-3j6","depends_on_id":"bd-2ka","type":"blocks","created_at":"2026-02-25T03:58:43.751361Z","created_by":"zac"},{"issue_id":"bd-3j6","depends_on_id":"bd-2p6","type":"blocks","created_at":"2026-02-25T04:04:32.185283Z","created_by":"zac"},{"issue_id":"bd-3j6","depends_on_id":"bd-kmi","type":"blocks","created_at":"2026-02-25T03:58:43.706663Z","created_by":"zac"}]}
{"id":"bd-3o0","title":"PRM-FP-0004: Wire Homebrew release path parity","description":"Add Homebrew/tap update path parity using produced release artifacts and checksums from release workflow.\n\n## Acceptance Criteria\n- Workflow/job updates fingerprint formula with current version and per-target checksums; automation references published release artifacts and SHA256SUMS; resulting formula supports install verification path equivalent to rvl tap behavior; dry-run/validation step confirms generated formula syntax and URLs.\n\n## Notes\nBoundary: formula automation only; avoid rebuilding release artifacts in this bead.","acceptance_criteria":"Workflow/job updates fingerprint formula with current version and per-target checksums; automation references published release artifacts and SHA256SUMS; resulting formula supports install verification path equivalent to rvl tap behavior; dry-run/validation step confirms generated formula syntax and URLs.","notes":"Boundary: formula automation only; avoid rebuilding release artifacts in this bead.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T03:58:30.908642Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.748488Z","compaction_level":0,"original_size":0,"labels":["brew","infra","release"],"dependencies":[{"issue_id":"bd-3o0","depends_on_id":"bd-poy","type":"blocks","created_at":"2026-02-25T04:04:32.137286Z","created_by":"zac"}]}
{"id":"bd-3v7","title":"PRM-FP-0103: DSL evaluation engine","description":"Assertion evaluation, content extraction, and content hash computation for DSL-compiled fingerprints.\n\n## Files touched\nsrc/dsl/assertions.rs, src/dsl/extract.rs, src/dsl/content_hash.rs\n\n## Acceptance Criteria\n- Assertion enum with evaluate(doc: &Document) → AssertionResult for all 7 v0.1 types\n- Short-circuit: on first failure, remaining assertions recorded as 'Skipped (prior assertion failed)'\n- filename_regex: matches against document path basename\n- sheet_exists: checks sheet name presence\n- sheet_name_regex: matches any sheet name against regex\n- cell_eq: exact value match at cell address\n- cell_regex: regex match at cell address\n- range_non_null: all cells in range non-empty\n- sheet_min_rows: sheet has ≥N data rows\n- Content extraction: pull named ranges/cells into HashMap<String, Value>\n- Content hash: BLAKE3 over extracted content sections\n- Same document + same fingerprint + same extraction = same content hash (deterministic)\n- Unit tests for each assertion type (pass and fail cases)\n\n## Depends on\nPRM-FP-0101 (document abstraction), PRM-FP-0102 (DSL parser)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:43.134067Z","created_by":"zac","updated_at":"2026-02-26T11:20:57.317657Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3v7","depends_on_id":"bd-23q","type":"blocks","created_at":"2026-02-26T11:20:57.262536Z","created_by":"zac"},{"issue_id":"bd-3v7","depends_on_id":"bd-f6u","type":"blocks","created_at":"2026-02-26T11:20:57.317605Z","created_by":"zac"}]}
{"id":"bd-412","title":"PRM-FP-0005: Test coverage parity plan vs rvl","description":"Audit current fingerprint tests against rvl coverage model (unit, integration, smoke, golden, witness command coverage). Produce missing-test matrix and convert it into executable test beads.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T03:58:30.953053Z","created_by":"zac","updated_at":"2026-02-25T04:02:20.777981Z","closed_at":"2026-02-25T04:02:20.777887Z","close_reason":"parity matrix completed and gaps converted to executable beads","compaction_level":0,"original_size":0,"labels":["coverage","parity","tests"],"comments":[{"id":1,"issue_id":"bd-412","author":"Zac","text":"Completed PRM-FP-0005 parity review. Added docs/TEST_COVERAGE_PARITY.md with evidence-based matrix versus rvl (213 src tests, 111 integration tests, 120 fixture files baseline vs 0 today in fingerprint). Confirmed all identified gaps are mapped to executable beads; added bd-9in for fixture corpus and linked dependencies from bd-1zd/bd-18y/bd-kmi/bd-2ka.","created_at":"2026-02-25T04:02:20Z"}]}
{"id":"bd-9in","title":"PRM-FP-0011: Build core fixture corpus for fingerprint tests","description":"Create core fixture corpus required for initial unit/integration/smoke/golden bring-up: representative csv/xlsx/pdf samples, hashed manifests, and minimal skipped/refusal triggers.\n\n## Acceptance Criteria\n- Add tests/fixtures with core happy-path files for csv/xlsx/pdf; add hashed manifest fixtures for pipeline tests; add at least one corrupt/parse-fail fixture and one malformed-input manifest fixture for refusal path; document fixture inventory in tests/fixtures/README.md with intended test usage.\n\n## Notes\nKeep scope to core bring-up corpus; advanced edge-case fixtures move to PRM-FP-0012.","acceptance_criteria":"Add tests/fixtures with core happy-path files for csv/xlsx/pdf; add hashed manifest fixtures for pipeline tests; add at least one corrupt/parse-fail fixture and one malformed-input manifest fixture for refusal path; document fixture inventory in tests/fixtures/README.md with intended test usage.","notes":"Keep scope to core bring-up corpus; advanced edge-case fixtures move to PRM-FP-0012.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T04:01:59.988470Z","created_by":"zac","updated_at":"2026-02-25T04:05:40.634712Z","compaction_level":0,"original_size":0,"labels":["fixtures","parity","tests"]}
{"id":"bd-f6u","title":"PRM-FP-0102: DSL parser","description":"Parse .fp.yaml fingerprint definitions into typed Rust structs: fingerprint_id, format, assertions list, extract sections, content_hash config.\n\n## Files touched\nsrc/dsl/mod.rs, src/dsl/parser.rs\n\n## Acceptance Criteria\n- Parses the argus-model.fp.yaml example from PLAN.md correctly\n- All v0.1 assertion types deserialize: filename_regex, sheet_exists, sheet_name_regex, cell_eq, cell_regex, range_non_null, sheet_min_rows\n- Extract sections parsed into typed structs\n- Content hash config (algorithm, over fields) parsed\n- Returns typed error for malformed YAML (E_INVALID_YAML, E_UNKNOWN_ASSERTION, E_MISSING_FIELD)\n- Unit tests for valid and invalid YAML inputs\n- Deferred assertions (range_populated, sum_eq, within_tolerance) rejected with clear error\n\n## Depends on\nPRM-FP-0100 (scaffold)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:19:34.685806Z","created_by":"zac","updated_at":"2026-02-26T11:20:57.208049Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-f6u","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:20:57.208008Z","created_by":"zac"}]}
{"id":"bd-hwe","title":"PRM-FP-0107: Pipeline (reader + enricher + parallel)","description":"Core run-mode pipeline: JSONL reading, record validation, fingerprint matching, record enrichment, parallel ordered output.\n\n## Files touched\nsrc/pipeline/mod.rs, src/pipeline/reader.rs, src/pipeline/enricher.rs, src/pipeline/parallel.rs\n\n## Acceptance Criteria\n- reader.rs: parse JSONL from stdin or file, validate version field, validate bytes_hash on non-skipped\n- E_BAD_INPUT refusal on invalid JSONL, missing bytes_hash, unrecognized upstream version\n- enricher.rs: for each record, try --fp list in order (first match wins), build fingerprint result\n- Upstream _skipped passthrough: update version + tool_versions, set fingerprint: null\n- New _skipped: IO/parse failure → _skipped: true, fingerprint: null, append _warnings\n- parallel.rs: --jobs N parallel workers with bounded reorder buffer\n- Output order MUST match input order regardless of --jobs\n- Reorder buffer bounds in-flight work (no unbounded growth)\n- version field set to fingerprint.v0 on all output records\n- tool_versions includes fingerprint semver merged with upstream\n- Integration test: hashed JSONL in → enriched JSONL out with correct ordering\n\n## Depends on\nPRM-FP-0101 (document), PRM-FP-0104 (refusal+output), PRM-FP-0106 (registry)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:20:20.224108Z","created_by":"zac","updated_at":"2026-02-26T11:20:57.724077Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-hwe","depends_on_id":"bd-1f0","type":"blocks","created_at":"2026-02-26T11:20:57.724037Z","created_by":"zac"},{"issue_id":"bd-hwe","depends_on_id":"bd-1um","type":"blocks","created_at":"2026-02-26T11:20:57.674672Z","created_by":"zac"},{"issue_id":"bd-hwe","depends_on_id":"bd-23q","type":"blocks","created_at":"2026-02-26T11:20:57.624415Z","created_by":"zac"}]}
{"id":"bd-kmi","title":"PRM-FP-0008: Add smoke tests for CLI surfaces","description":"Add smoke/E2E tests for CLI surfaces and witness subcommands.\n\n## Acceptance Criteria\n- Add smoke tests covering run mode invocation, compile mode invocation (including --check), --list, --describe, --schema, and witness query/last/count; assert documented exit-code routing (0/1/2) at process boundary; tests execute the built binary in temp workspace and avoid reliance on external services.\n\n## Notes\nNon-goal: byte-stable golden snapshots (handled by PRM-FP-0009).","acceptance_criteria":"Add smoke tests covering run mode invocation, compile mode invocation (including --check), --list, --describe, --schema, and witness query/last/count; assert documented exit-code routing (0/1/2) at process boundary; tests execute the built binary in temp workspace and avoid reliance on external services.","notes":"Non-goal: byte-stable golden snapshots (handled by PRM-FP-0009).","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T03:58:31.085316Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.645806Z","compaction_level":0,"original_size":0,"labels":["cli","smoke","tests"],"dependencies":[{"issue_id":"bd-kmi","depends_on_id":"bd-14l","type":"blocks","created_at":"2026-02-25T04:04:32.004569Z","created_by":"zac"},{"issue_id":"bd-kmi","depends_on_id":"bd-9in","type":"blocks","created_at":"2026-02-25T04:02:09.776223Z","created_by":"zac"},{"issue_id":"bd-kmi","depends_on_id":"bd-tdc","type":"blocks","created_at":"2026-02-26T11:21:23.645766Z","created_by":"zac"}]}
{"id":"bd-poy","title":"PRM-FP-0013: Release attestations and signing parity","description":"Add supply-chain release artifacts after base release workflow: checksums, signatures, SBOM, and provenance.\n\n## Acceptance Criteria\n- Release workflow emits SHA256SUMS over distributable archives; cosign signature/certificate artifacts are published with release; CycloneDX SBOM artifact is published with release; provenance statement artifact is published with release; failures in these steps fail the release job.\n\n## Notes\nDepends on base release workflow; do not duplicate build-matrix logic here.","acceptance_criteria":"Release workflow emits SHA256SUMS over distributable archives; cosign signature/certificate artifacts are published with release; CycloneDX SBOM artifact is published with release; provenance statement artifact is published with release; failures in these steps fail the release job.","notes":"Depends on base release workflow; do not duplicate build-matrix logic here.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T04:04:27.633302Z","created_by":"zac","updated_at":"2026-02-25T04:05:41.202759Z","compaction_level":0,"original_size":0,"labels":["release","security","supply-chain"],"dependencies":[{"issue_id":"bd-poy","depends_on_id":"bd-w5b","type":"blocks","created_at":"2026-02-25T04:04:32.093359Z","created_by":"zac"}]}
{"id":"bd-tdc","title":"PRM-FP-0109: Orchestration (lib.rs wiring)","description":"Wire pub fn run() → u8 in lib.rs: CLI dispatch → registry build → pipeline execution → witness append → exit code. Connect all modules into the final binary.\n\n## Files touched\nsrc/lib.rs (full implementation replacing stub)\n\n## Acceptance Criteria\n- pub fn run() → u8 handles full execution flow from PLAN.md section 'Execution flow (run mode)' steps 1-12\n- CLI dispatch: --version (clap), --describe, --schema, --list, witness subcommands, compile subcommand, run mode\n- Registry build with E_UNKNOWN_FP / E_DUPLICATE_FP_ID / E_UNTRUSTED_FP handling\n- Pipeline execution with correct exit code routing (0=ALL_MATCHED, 1=PARTIAL, 2=REFUSAL)\n- Witness append after pipeline (unless --no-witness)\n- Compile subcommand dispatch\n- E2E test: echo hashed JSONL | fingerprint --fp csv.v0 produces enriched output\n- E2E test: fingerprint --list shows built-in fingerprints\n- E2E test: invalid input → exit 2 with refusal envelope\n\n## Depends on\nPRM-FP-0100 (scaffold+CLI), PRM-FP-0105 (witness), PRM-FP-0107 (pipeline), PRM-FP-0108 (compile)","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:20:38.395272Z","created_by":"zac","updated_at":"2026-02-26T11:20:57.968528Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-tdc","depends_on_id":"bd-1bm","type":"blocks","created_at":"2026-02-26T11:20:57.822644Z","created_by":"zac"},{"issue_id":"bd-tdc","depends_on_id":"bd-1pi","type":"blocks","created_at":"2026-02-26T11:20:57.871126Z","created_by":"zac"},{"issue_id":"bd-tdc","depends_on_id":"bd-22r","type":"blocks","created_at":"2026-02-26T11:20:57.968488Z","created_by":"zac"},{"issue_id":"bd-tdc","depends_on_id":"bd-hwe","type":"blocks","created_at":"2026-02-26T11:20:57.917210Z","created_by":"zac"}]}
{"id":"bd-w5b","title":"PRM-FP-0003: Add base release workflow (build + publish artifacts)","description":"Implement base release workflow parity with rvl: build target matrix archives and publish GitHub release assets. Keep this issue focused on build/publish mechanics only.\n\n## Acceptance Criteria\n- Add .github/workflows/release.yml; workflow derives version from Cargo.toml and ensures tag exists; builds release archives for target matrix and uploads them to GitHub release; generated artifacts are downloadable from release page; no signing/SBOM/provenance steps in this bead (handled separately).\n\n## Notes\nNon-goal: cosign, SHA256SUMS signing, SBOM/provenance generation, or Homebrew formula update.","acceptance_criteria":"Add .github/workflows/release.yml; workflow derives version from Cargo.toml and ensures tag exists; builds release archives for target matrix and uploads them to GitHub release; generated artifacts are downloadable from release page; no signing/SBOM/provenance steps in this bead (handled separately).","notes":"Non-goal: cosign, SHA256SUMS signing, SBOM/provenance generation, or Homebrew formula update.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-25T03:58:30.864567Z","created_by":"zac","updated_at":"2026-02-26T11:21:23.452717Z","compaction_level":0,"original_size":0,"labels":["infra","release","workflow"],"dependencies":[{"issue_id":"bd-w5b","depends_on_id":"bd-tdc","type":"blocks","created_at":"2026-02-26T11:21:23.452677Z","created_by":"zac"}]}
